"use strict";(self.webpackChunk_lp_front=self.webpackChunk_lp_front||[]).push([[972],{7825:(e,t,n)=>{n.d(t,{P:()=>s});var r=n(2784),a=n.n(r),o=n(2370),i=n(3557),l=n(5424);const s=()=>{const{notification:e,setNotification:t}=(0,r.useContext)(l.I),n=(0,i.TH)(),s=(0,r.useCallback)((()=>{t()}),[t]);return(0,r.useEffect)((()=>{const e=setTimeout(s,5e3);return()=>{clearTimeout(e)}}),[e,s]),(0,r.useEffect)((()=>{e?.targetLocation!==n.pathname&&t()}),[n.pathname]),a().createElement(a().Fragment,null,e&&a().createElement(o.P_,{"data-cy":`notification-${e?.variant}`,onClose:s,...e,className:"notification"}))}},7752:(e,t,n)=>{n.d(t,{X:()=>g});var r=n(2784),a=n.n(r),o=n(3557),i=n(4144);const l=[{url:"/",text:"Home",icon:"home"},{url:`/${i._.search}`,text:"Explore",icon:"explorer"},{url:`/${i._.words}`,text:"Vocabulary",icon:"brain"},{url:`/${i._.games}`,text:"Practice",icon:"dice"}],s=[{url:`/${i._.search}`,text:"Explore",icon:"explorer"},{url:`/${i._.words}`,text:"Vocabulary",icon:"brain"},{url:`/${i._.games}`,text:"Practice",icon:"dice"},{url:"/profile",text:"Profile",icon:"dragon"}],u=[{url:"/",text:"Home",icon:"home"},{url:`/${i._.search}`,text:"Explore",icon:"explorer"},{url:`/${i._.words}`,text:"Vocabulary",icon:"brain"},{url:`/${i._.games}`,text:"Practice",icon:"dice"}];var c=n(6525),d=n(2370),m=n(5424),f=n(7825),p=n(438);const v=[{text:"Review words",url:`/${i._.words}`},{text:"Look up words",url:`/${i._.search}`},{text:"Practice",url:`/${i._.games}`},{text:"Profile",url:`/${i._.profile}`}],g=({children:e,isLoading:t,noRedirect:n})=>{const{userId:g,logout:b,language:x,saveLanguage:h}=(0,r.useContext)(m.I),E=(0,o.s0)(),C=(0,o.TH)();(0,r.useEffect)((()=>{g||n||((0,p.x)("previousLocation",C.pathname),E("/sign-in"))}),[g,E,n,C.pathname]);const _=()=>{b(),E(`/${i._.signIn}`)};return a().createElement(a().Fragment,null,a().createElement("div",{className:"page"},a().createElement(f.P,null),g&&a().createElement(d.Er,{mobileNavLinks:s,navLinks:l,language:x,onLogout:_,userMenuItems:($=_,[{url:`/${i._.profile}`,text:"Profile",icon:"dragon"},{onClick:$,text:"Logout",icon:"door"}]),onLanguageChange:e=>{h(e)}}),t?a().createElement(c.L,null):a().createElement("main",{className:"main"},e),g&&a().createElement(d.$_,{links:v,mobileLinks:u})));var $}},7971:(e,t,n)=>{n.d(t,{L:()=>m});var r,a=n(2784),o=n.n(a),i=n(2370);function l(e,t){const{type:n,payload:a}=t;return n===r.INPUT_CHANGE?{...e,...a}:e}!function(e){e.INPUT_CHANGE="INPUT_CHANGE"}(r||(r={}));var s=n(1074),u=n(5424),c=n(4144);const d={buttonContainer:"R_HWvLfhaFbeX5Dvjyeg",formFields:"rVyuUJMlkNPDIq7f_08Q",form:"IcBpe_0OSerB448WDzBb"};function m({initialValues:e,onSubmit:t,validators:n,formConfig:m,isLoading:f}){const[{values:p,changeHandler:v,validate:g}]=function(e,t){const[n,o]=(0,a.useReducer)(l,e),i=(0,a.useCallback)((e=>{o({type:r.INPUT_CHANGE,payload:e})}),[o]);return[{values:n,changeHandler:i,validate:()=>{let e=!0;const r={};return t?(Object.keys(t).forEach((a=>{const o=t[a];if(o){const t=o.validate(n[a]);e=e&&t,t||(r[a]=o.errorText)}})),{isValid:e,errors:r}):{isValid:e,errors:r}}}]}(e,n),[b,x]=(0,a.useState)({}),{language:h}=(0,a.useContext)(u.I),E=e=>function(t){v({[e]:t})};return o().createElement("form",{className:d.form,onSubmit:e=>{e.preventDefault();const{errors:n,isValid:r}=g();r&&t(p),x(n)},"data-cy":"wordForm"},o().createElement("div",{className:d.formFields},m.map((e=>{const{Component:t,name:n,label:r,props:a={},isDisabled:i,value:l}=e,u=p[n]||l;return o().createElement(t,{initialValue:u,dataCy:`formField-${n}`,key:n,withTranslation:"defs"===n&&h===s.SQ.Spanish,name:n,label:r||n,isDisabled:i,onChange:E(n),errorText:b[n],...a})}))),o().createElement("div",{className:d.buttonContainer},o().createElement(i.rU,{variant:"button",to:`/${c._.words}`},"Cancel"),o().createElement(i.zx,{variant:"secondary",type:"submit",isLoading:f},"Save")))}},8664:(e,t,n)=>{n.d(t,{Q0:()=>s,UE:()=>i,Ym:()=>l,_5:()=>o,tz:()=>u,ym:()=>a});var r=n(7834);const a=r.Ps`
  mutation Login($input: LoginInput!) {
    login(input: $input) {
      token
      id
    }
  }
`,o=r.Ps`
  mutation SignUp($input: SignUpInput!) {
    signUp(input: $input) {
      token
      id
    }
  }
`,i=r.Ps`
  mutation SaveWord($input: NewWordInput!) {
    saveWord(input: $input) {
      name
      uuid
    }
  }
`,l=r.Ps`
  mutation DeleteWord($deleteWordId: ID!) {
    deleteWord(id: $deleteWordId)
  }
`,s=r.Ps`
  mutation UpdateWord($input: UpdateWordInput!) {
    updateWord(input: $input) {
      name
    }
  }
`,u=r.Ps`
  mutation SaveGameResult($input: [UpdateStatisticsInput!]) {
    saveGameResult(input: $input)
  }
`},2972:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(2784),a=n.n(r),o=n(3557),i=n(2370);const l="mNDKNIZlxgV1Y70kva3a",s="EXs1pWb5xkcYk0_LodmY";var u=n(7752),c=n(7971),d=n(4144),m=n(5424),f=n(1074);const p={name:"",audioUrl:"",particle:"",transcription:"",defs:[{def:"",examples:[{text:"",translation:""}]}],imgUrl:"",imgDesc:"",shortDef:[],language:f.SQ.English,additionalInfo:"",stems:[],isOffensive:!1,level:f.aC.B1},v=[{Component:i.b0,name:"name"},{Component:i.n4,name:"level"},{Component:i.b0,name:"particle"},{Component:i.b0,name:"audioUrl",label:"audio url"},{Component:i.v9,name:"defs"},{Component:i.b0,name:"transcription"},{Component:i.qt,name:"shortDef",label:"short definition",props:{showOrderButtons:!0}},{Component:i.b0,name:"imgUrl",label:"image url"},{Component:i.qt,name:"stems",label:"word form"},{Component:i.b0,name:"imgDesc",label:"image description"},{Component:i.b0,name:"additionalInfo",label:"Additional information"},{Component:i.XZ,name:"isOffensive",props:{variant:"isOffensive"}}],g={defs:{validate:e=>!!Array.isArray(e)&&e.filter((e=>e?.def)).length>0,errorText:"word definition is required"},name:{validate:e=>e.length>0,errorText:"name is required"},particle:{validate:e=>e.length>0,errorText:"particle is required"},shortDef:{validate:e=>!!Array.isArray(e)&&e.filter(Boolean).length>0,errorText:"short definition is required"}};var b=n(4826),x=n(3379),h=n(8664);const E=()=>{const[e,t]=(0,x.D)(h.UE,{update(e){e.evict({fieldName:"game"}),e.evict({fieldName:"words"})}}),{setNotification:n,language:f}=(0,r.useContext)(m.I),E=(0,o.s0)();(0,r.useEffect)((()=>{t.error&&n({variant:"error",text:"Error",subText:t?.error?.message||"something went wrong"})}),[t.error]),(0,r.useEffect)((()=>{const{data:e}=t;if(e){const{name:t}=e.saveWord;n({variant:"success",text:"Word added",subText:`${t} is added successfully.`,targetLocation:`/${d._.words}`}),E(`/${d._.words}`)}}),[t.data]);return a().createElement(u.X,null,a().createElement(i.rU,{"data-cy":"backLink",className:l,to:`/${d._.words}`},a().createElement(i.JO,{width:16,height:16,id:"arrow-left"}),"Back to vocabulary"),a().createElement("h1",{className:s},"Add new word"),a().createElement(c.L,{initialValues:p,formConfig:v,validators:g,onSubmit:t=>{const n={...(0,b.X)(t),language:f};e({variables:{input:n}})}}))}},4826:(e,t,n)=>{function r(e){if(Array.isArray(e))return e.map(r);if("string"==typeof e)return e?.trim();if(null===e||"object"!=typeof e)return e;const t={...e};t?.__typename&&delete t.__typename;return Object.keys(t).forEach((e=>{const n=t[e];t[e]=r(n)})),t}function a(e){const{defs:t}=e;if(!t)return e;const n=t.map((e=>({def:e?.def,examples:e?.examples?.filter((e=>e?.text))}))).filter((e=>e?.def));return{...e,defs:n,shortDef:e?.shortDef?.filter(Boolean)}}n.d(t,{X:()=>a,o:()=>r})},3379:(e,t,n)=>{n.d(t,{D:()=>c});var r=n(2970),a=n(2784),o=n(8769),i=n(8807),l=n(7274),s=n(5832),u=n(6675);function c(e,t){var n=(0,u.x)(null==t?void 0:t.client);(0,l.Vp)(e,l.n_.Mutation);var c=a.useState({called:!1,loading:!1,client:n}),d=c[0],m=c[1],f=a.useRef({result:d,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});Object.assign(f.current,{client:n,options:t,mutation:e});var p=a.useCallback((function(e){void 0===e&&(e={});var t=f.current,n=t.options,a=t.mutation,l=(0,r.pi)((0,r.pi)({},n),{mutation:a}),u=e.client||f.current.client;f.current.result.loading||l.ignoreResults||!f.current.isMounted||m(f.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:u});var c=++f.current.mutationId,d=(0,o.J)(l,e);return u.mutate(d).then((function(t){var n,r,a=t.data,o=t.errors,l=o&&o.length>0?new s.cA({graphQLErrors:o}):void 0,p=e.onError||(null===(n=f.current.options)||void 0===n?void 0:n.onError);if(l&&p&&p(l,d),c===f.current.mutationId&&!d.ignoreResults){var v={called:!0,loading:!1,data:a,error:l,client:u};f.current.isMounted&&!(0,i.D)(f.current.result,v)&&m(f.current.result=v)}var g=e.onCompleted||(null===(r=f.current.options)||void 0===r?void 0:r.onCompleted);return l||null==g||g(t.data,d),t})).catch((function(t){var n;if(c===f.current.mutationId&&f.current.isMounted){var r={loading:!1,error:t,data:void 0,called:!0,client:u};(0,i.D)(f.current.result,r)||m(f.current.result=r)}var a=e.onError||(null===(n=f.current.options)||void 0===n?void 0:n.onError);if(a)return a(t,d),{data:void 0,errors:t};throw t}))}),[]),v=a.useCallback((function(){if(f.current.isMounted){var e={called:!1,loading:!1,client:n};Object.assign(f.current,{mutationId:0,result:e}),m(e)}}),[]);return a.useEffect((function(){return f.current.isMounted=!0,function(){f.current.isMounted=!1}}),[]),[p,(0,r.pi)({reset:v},d)]}}}]);